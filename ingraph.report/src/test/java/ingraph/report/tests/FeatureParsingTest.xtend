/*
 * generated by Xtext 2.10.0
 */
package ingraph.report.tests

import ingraph.report.FeatureStandaloneSetup
import ingraph.report.feature.Feature
import ingraph.report.feature.WhenStep
import java.util.Collections
import org.eclipse.emf.common.util.URI
import org.eclipse.xtext.resource.XtextResourceSet
import org.junit.Test

class FeatureParsingTest {

	@Test
	def void loadModel() {
		val injector = new FeatureStandaloneSetup().createInjectorAndDoEMFRegistration();

		// obtain a resourceset from the injector
		val resourceSet = injector.getInstance(typeof(XtextResourceSet));

		// load a resource by URI, in this case from the file system
		val resource = resourceSet.createResource(URI.createURI("../opencypher-tests/" + "MatchAcceptance.feature"));
		resource.load(Collections.emptyMap);

		println(resource.errors)
		val feature = resource.contents.get(0) as Feature
		// println(PrettyPrinter.prettyPrint(feature))
		feature.scenarios.forEach [
			it.steps.filter(typeof(WhenStep)).forEach [
				val x = desc //
				.replaceAll('''"""''', '''''') //
				.replaceAll("'''", "") //
				.replaceAll('''\n\s*''', "\n")

				println(x)
			]
		]
	}

}
